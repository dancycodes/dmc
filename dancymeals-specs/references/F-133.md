# F-133 â€” Delivery Areas & Fees Display

> Module: Tenant Landing
> Priority: Must-have
> Precedence: F-126, F-091
> Type: functional

---

## What It Does
Renders a delivery areas and fees section on the cook's tenant landing page. Lists all towns and quarters where the cook delivers, organized hierarchically (town > quarters), with the delivery fee for each quarter. Also displays pickup locations with addresses (pickup is free). Helps clients determine whether their location is within the cook's delivery zone and what the fee will be before starting an order.

---

## Who Uses It
| Role | Interaction |
|------|-------------|
| Client (guest or authenticated) | Checks if their area is covered and what the delivery fee is |
| Cook | Sees how their delivery areas are presented to clients |

---

## User Scenarios
### Scenario 1: Viewing delivery areas
A visitor scrolls to the delivery areas section. They see "Douala" as a town header with quarters listed below: "Bonanjo - 500 XAF", "Akwa - 500 XAF" (grouped fee), "Bonaberi - 1,000 XAF", "Deido - Free delivery". Each quarter shows its individual or group delivery fee.

### Scenario 2: Viewing pickup locations
Below the delivery areas, a "Pickup Locations" subsection shows: "Chef Latifa's Kitchen - Akwa, Rue des Manguiers, Douala" with a small map pin icon. Pickup is labeled as "Free."

### Scenario 3: Multiple towns
The cook delivers to Douala and Yaounde. Both towns are displayed as separate sections with their respective quarters and fees. The visitor can expand/collapse each town.

### Scenario 4: Client area not listed
The visitor's quarter is not in the list. At the bottom of the section, a note reads: "Don't see your area? Contact the cook to ask about delivery to your location." A WhatsApp link is provided.

---

## Business Rules
| Code | Rule |
|------|------|
| BR-195 | Delivery areas are organized hierarchically: town > quarters with fees |
| BR-196 | Each quarter displays its delivery fee in XAF; fee of 0 shows "Free delivery" |
| BR-197 | Quarters with the same group fee are visually grouped together |
| BR-198 | Pickup locations are listed separately with full address details |
| BR-199 | Pickup is always labeled "Free" (no fee) |
| BR-200 | A fallback message is displayed for clients whose area is not listed, with cook's WhatsApp contact |
| BR-201 | Towns can be expanded/collapsed to manage visual space (all expanded by default on desktop) |
| BR-202 | All text in this section must be localized via `__()` |
| BR-203 | Town and quarter names are displayed in the user's current language (name_en / name_fr) |

---

## Data Involved
**Reads:**
- Towns the cook delivers to (from delivery area configuration)
- Quarters per town with delivery fees
- Group fee associations
- Pickup locations with addresses
- Cook's WhatsApp number (for "area not listed" fallback)

**Creates:**
- Delivery areas section Blade component
- Town/quarter list component
- Pickup location card component

**Updates:**
- Nothing

**Relationships:**
- Child of F-126 (Tenant Landing Page Layout)
- Uses delivery area data from F-091 (Delivery Area Management)
- Uses pickup location data from F-092 (Pickup Location Management)
- WhatsApp link connects to F-134 (WhatsApp Contact & Social Links)
- Data feeds into F-141 (Delivery Location Selection) during ordering

---

## Acceptance Criteria
- **Given** a cook with delivery areas in 2 towns, **when** the section loads, **then** both towns are displayed with their quarters and fees
- **Given** a quarter with a fee of 0, **when** viewing the quarter, **then** "Free delivery" is displayed
- **Given** pickup locations configured, **when** viewing the section, **then** pickup locations are listed with "Free" label
- **Given** the visitor's area is not listed, **when** viewing the section, **then** a fallback message with WhatsApp link is shown
- **Given** a mobile viewport, **when** viewing the section, **then** towns display as collapsible accordion cards

---

## Verification Steps
1. Visit a tenant site and scroll to the delivery areas section
2. Verify towns and quarters display with correct fees
3. Verify "Free delivery" for quarters with 0 fee
4. Verify pickup locations display with addresses
5. Verify the "area not listed" fallback message with WhatsApp link
6. Test expand/collapse behavior for town sections
7. Switch language and verify town/quarter names update

---

## Edge Cases & Exceptions
| Condition | Expected Behavior |
|-----------|-------------------|
| Cook has no delivery areas configured | Section shows: "Delivery areas not yet configured. Contact the cook." |
| Cook has no pickup locations | Pickup subsection hidden |
| Cook has delivery areas but no pickup locations | Only delivery areas shown |
| Town has only one quarter | Quarter listed without collapsible behavior |
| Very long quarter name | Truncated with ellipsis |
| Fee is very high (e.g., 10,000 XAF) | Displayed normally; no cap on displayed fee |

---

## UI/UX Notes
- Section header: "Delivery Areas & Pickup" (localized)
- Towns as expandable cards/accordion panels
- Quarters listed with fee aligned to the right
- Fee amount in bold; "Free delivery" in green text
- Pickup locations with map pin icon and full address
- "Contact cook" fallback at bottom with WhatsApp icon
- Section anchored with id="delivery" for navigation

---

## Related Features
| Code | Feature | Relationship |
|------|---------|-------------|
| F-126 | Tenant Landing Page Layout | Parent layout containing this section |
| F-091 | Delivery Area Management | Source of delivery area data |
| F-092 | Pickup Location Management | Source of pickup location data |
| F-134 | WhatsApp Contact & Social Links | WhatsApp link in fallback message |
| F-141 | Delivery Location Selection | Uses this data during order checkout |
