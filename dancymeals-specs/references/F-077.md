# F-077 â€” Cook Dashboard Home

> Module: Cook Dashboard
> Priority: Must-have
> Precedence: F-076
> Type: functional

---

## What It Does

The default landing section when a cook opens their dashboard. Displays an at-a-glance overview of the cook's business: today's orders summary (grouped by status), this week's revenue, active meals count, a list of the last 5 recent orders, and recent notifications. Quick stat cards provide key metrics. Real-time updates via Gale ensure the data stays current without page refresh.

---

## Who Uses It

| Role | Interaction |
|------|-------------|
| Cook | Views business overview and key metrics on dashboard home |
| Manager | Views permitted overview data based on their permissions |

---

## User Scenarios

### Scenario 1: Active business day
A cook opens the dashboard on a busy day. They see: 3 pending orders, 2 confirmed orders, 1 preparing, 0 ready for pickup/delivery. Revenue this week shows 45,000 XAF. Active meals count is 8. The recent orders list shows the last 5 orders with customer name, meal, status, and time.

### Scenario 2: New cook with no activity
A newly set-up cook opens the dashboard home. All stat cards show 0. The recent orders section says "No orders yet." Recent notifications are empty. A helpful prompt suggests creating more meals or sharing their link.

### Scenario 3: Real-time order update
While the cook is viewing the dashboard, a new order comes in. The pending orders count updates from 3 to 4 via Gale. The recent orders list adds the new order at the top. A toast notification appears: "New order received!"

### Scenario 4: Revenue tracking
The cook checks their weekly revenue card. It shows the total revenue from completed orders this week (Monday to current day). Clicking the card navigates to the Wallet/Analytics section for details.

### Scenario 5: Notifications
The dashboard shows the 3 most recent notifications: a new order, a review received, and a payment confirmation. Each notification links to the relevant page.

---

## Business Rules

| Code | Rule |
|------|------|
| BR-165 | Today's orders summary shows counts grouped by status: Pending, Confirmed, Preparing, Ready |
| BR-166 | "This week" revenue calculates from Monday 00:00 to current time in Africa/Douala timezone |
| BR-167 | Revenue counts only completed (delivered/picked up) orders for this tenant |
| BR-168 | Active meals count reflects meals with `is_active = true` for this tenant |
| BR-169 | Recent orders list shows the last 5 orders regardless of status, newest first |
| BR-170 | Dashboard data updates in real-time via Gale SSE (no polling, no page refresh) |
| BR-171 | Notifications shown are the most recent 3 unread notifications for the current user |
| BR-172 | All monetary values displayed in XAF with proper formatting |
| BR-173 | All user-facing text must use `__()` localization |

---

## Data Involved

**Reads:**
- Orders for this tenant (today's count by status, last 5 orders)
- Completed orders this week (for revenue calculation)
- Active meals count for this tenant
- User notifications (recent 3 unread)

**Creates:**
- Nothing

**Updates:**
- Nothing (display only; Gale handles live updates)

---

## Acceptance Criteria

- **Given** the cook is on the dashboard, **when** the home section loads, **then** 4 stat cards are displayed (today's orders, week revenue, active meals, pending orders)
- **Given** orders exist today, **when** the home loads, **then** today's orders are grouped by status with correct counts
- **Given** completed orders this week, **when** the revenue card renders, **then** it shows the correct total in XAF
- **Given** active meals exist, **when** the home loads, **then** the active meals count is correct
- **Given** at least 5 orders exist, **when** the recent orders list renders, **then** exactly 5 are shown with newest first
- **Given** a new order arrives, **when** the event fires, **then** the dashboard updates in real-time via Gale
- **Given** unread notifications exist, **when** the home loads, **then** up to 3 recent notifications are displayed

---

## Verification Steps

1. Open dashboard home and verify all 4 stat cards display correct data
2. Create an order today and confirm it appears in today's orders summary
3. Verify revenue calculation matches completed orders this week
4. Confirm active meals count matches the database
5. Check recent orders list shows 5 entries in correct order
6. Trigger a new order and verify real-time update on the dashboard
7. Verify notifications section shows recent unread items
8. Switch to French and confirm all text is translated

---

## Edge Cases & Exceptions

| Condition | Expected Behavior |
|-----------|-------------------|
| No orders ever placed | All counts show 0; helpful onboarding message shown |
| Orders from previous weeks | Not counted in "this week" revenue |
| Cook has 100+ pending orders | Count displayed accurately; no performance issue |
| SSE connection drops | Dashboard shows last known state; reconnects automatically |
| Dashboard loaded at midnight (timezone boundary) | "Today" correctly resets at midnight Africa/Douala |

---

## UI/UX Notes

- Stat cards in a 2x2 grid on desktop, 2x2 on tablet, stacked on mobile
- Each stat card has: icon, label, value, and subtle trend indicator (up/down arrow if applicable)
- Stat cards are clickable, navigating to the relevant section
- Recent orders in a compact table/list: order #, customer name, meal summary, status badge, time ago
- Notifications in a compact list with icons, message preview, and time ago
- Color-coded status badges: Pending (yellow), Confirmed (blue), Preparing (orange), Ready (green)
- Revenue displayed prominently with XAF formatting (e.g., "45,000 XAF")
- Skeleton loading states for each section while data loads

---

## Related Features

| Code | Feature | Relationship |
|------|---------|-------------|
| F-076 | Cook Dashboard Layout | Parent layout containing this home section |
| F-078 | Cook Quick Actions Panel | Quick actions widget on this page |
