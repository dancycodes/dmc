# F-047 — Tenant Detail View

> Module: Admin
> Priority: Must-have
> Precedence: F-046
> Type: functional

---

## What It Does
Displays a comprehensive detail page for a single tenant within the admin panel. Shows all tenant information, the assigned cook, key metrics (total orders, total revenue, commission rate, active meals count), current status, and an activity history for this tenant. Provides quick links to edit the tenant, configure commission, and view the cook's profile.

---

## Who Uses It
| Role | Interaction |
|------|-------------|
| Super-Admin | Reviews full tenant details and takes management actions |
| Admin | Reviews full tenant details and takes management actions |

---

## User Scenarios
### Scenario 1: Viewing tenant overview
An admin clicks "Chef Amara's Kitchen" from the tenant list. The detail page loads showing: tenant name (en/fr), subdomain (chef-amara.dancymeals.com as a clickable link), custom domain if set, description, status badge, creation date, and last update date.

### Scenario 2: Reviewing metrics
The admin sees summary cards showing: Total Orders (342), Total Revenue (XAF 1,250,000), Commission Rate (10%), Active Meals (12). Each card has a subtle trend indicator compared to the previous period.

### Scenario 3: Viewing the assigned cook
The tenant has cook "Amara Njoh" assigned. The admin sees the cook's name, email, and phone. A link takes them to the cook's user detail page (F-051).

### Scenario 4: Checking activity history
The admin scrolls to the Activity History section. It shows recent activity for this tenant: "Tenant status changed to inactive by Admin John", "Commission rate updated from 10% to 12%", etc. Paginated, most recent first.

### Scenario 5: Taking actions
The admin clicks "Edit Tenant" to navigate to the edit form (F-048), "Configure Commission" to go to commission settings (F-062), or "Visit Site" to open the tenant's website in a new tab.

---

## Business Rules
| Code | Rule |
|------|------|
| BR-070 | Total revenue is the sum of all completed order amounts for this tenant |
| BR-071 | Active meals count includes only meals with status "available" |
| BR-072 | Activity history shows only actions related to this specific tenant |
| BR-073 | Commission rate displays the current configured rate (default 10% if not overridden) |
| BR-074 | "Visit Site" link opens the tenant's subdomain URL in a new browser tab |

---

## Data Involved
**Reads:**
- Tenant: all fields
- Cook (user) assigned to tenant: name, email, phone
- Orders: aggregate count and revenue sum for the tenant
- Meals: count of active meals for the tenant
- Commission configuration for the tenant
- Activity log entries scoped to this tenant

**Creates:**
- Nothing

**Updates:**
- Nothing

**Relationships:**
- F-046: Navigated from the tenant list
- F-048: Edit form linked from this page
- F-049: Cook assignment displayed here
- F-062: Commission configuration linked from this page

---

## Acceptance Criteria
- **Given** a valid tenant ID, **when** navigating to the tenant detail page, **then** all tenant information is displayed
- **Given** a tenant with an assigned cook, **when** viewing the page, **then** the cook's name, email, and phone are shown with a link to their profile
- **Given** a tenant with no cook assigned, **when** viewing the page, **then** a prompt to assign a cook is shown
- **Given** a tenant with orders, **when** viewing the metrics section, **then** correct totals for orders and revenue are displayed
- **Given** activity log entries for the tenant, **when** scrolling to the activity section, **then** recent activities are listed chronologically

---

## Verification Steps
1. Navigate to a tenant with an assigned cook — confirm cook info and link are displayed
2. Check metrics cards against database aggregates — confirm accuracy
3. View a tenant with no cook — confirm "Assign Cook" prompt appears
4. Click "Edit Tenant" — confirm navigation to edit form
5. Click "Visit Site" — confirm new tab opens with tenant's subdomain
6. Check activity history — confirm entries are scoped to this tenant only

---

## Edge Cases & Exceptions
| Condition | Expected Behavior |
|-----------|-------------------|
| Tenant with zero orders | Metrics show 0 for orders and XAF 0 for revenue |
| Tenant with no activity history | Activity section shows "No activity recorded yet." |
| Cook account was deactivated | Cook section shows name with a "Deactivated" badge and warning |
| Tenant's subdomain inaccessible | "Visit Site" link still works (browser handles DNS resolution) |
| Very long description text | Truncated with "Read more" expand toggle |

---

## UI/UX Notes
- Top section: tenant name (large), status badge, creation date, action buttons (Edit, Visit Site)
- Metrics section: 4 summary cards in a responsive grid (2x2 on mobile, 4x1 on desktop)
- Cook section: card with cook avatar, name, email, phone, and "View Profile" link
- Activity history: timeline-style list with user avatar, action description, and timestamp
- Breadcrumb: Admin > Tenants > Chef Amara's Kitchen
- Back navigation to tenant list

---

## Related Features
| Code | Feature | Relationship |
|------|---------|-------------|
| F-046 | Tenant List & Search | Parent navigation |
| F-048 | Tenant Edit & Status Toggle | Linked action from this page |
| F-049 | Cook Account Assignment | Cook info displayed here; assign link if no cook |
| F-051 | User Detail View | Cook profile link navigates here |
| F-062 | Commission Configuration | Linked action from this page |
