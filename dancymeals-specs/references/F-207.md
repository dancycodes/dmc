# F-207 â€” Admin Growth Metrics

> Module: Analytics
> Priority: Should-have
> Precedence: F-057
> Type: functional

---

## What It Does
Provides a platform growth dashboard in the admin panel showing key growth indicators over time. Displays charts for new user registrations, new tenant/cook additions, order volume growth, and active user trends. Comparison periods show growth rates. Key milestones are highlighted (e.g., 1000th user, 100th cook). This helps admins understand the platform's trajectory and make strategic decisions.

---

## Who Uses It
| Role | Interaction |
|------|-------------|
| Admin | Views platform growth metrics in the admin panel |
| Super Admin | Full access |

---

## User Scenarios
### Scenario 1: View growth overview
The admin navigates to Growth Metrics. Summary cards show: "Total Users: 12,340," "Total Cooks: 87," "Orders This Month: 3,450," "Active Users (30d): 2,100."

### Scenario 2: New registrations over time
A line chart shows new user registrations per month. The admin sees steady growth with a spike in November (marketing campaign).

### Scenario 3: New cooks over time
A bar chart shows new cook/tenant additions per month. Growth has been consistent at 5-8 new cooks per month.

### Scenario 4: Order volume growth
A line chart shows total orders per month. The admin sees order volume doubling over the past 6 months.

### Scenario 5: Active user trend
A line chart shows monthly active users (users who placed at least one order). The admin notices a slight dip and investigates.

### Scenario 6: Milestones
A sidebar or banner highlights recent milestones: "Reached 10,000 users on Jan 15," "100th cook joined on Dec 3."

---

## Business Rules
| Code | Rule |
|------|------|
| BR-440 | Only admin and super-admin roles can access growth metrics |
| BR-441 | New users = users created within the selected period |
| BR-442 | New cooks = tenants created within the selected period |
| BR-443 | Order volume = total orders placed within the selected period |
| BR-444 | Active users = distinct users who placed at least one order in the last 30 days |
| BR-445 | Date range options: Last 3 Months, Last 6 Months, This Year, Last Year, All Time |
| BR-446 | Comparison shows growth percentage vs previous period |
| BR-447 | Milestones are predefined thresholds: 100, 500, 1000, 5000, 10000 for users; 10, 50, 100 for cooks; 1000, 10000, 100000 for orders |
| BR-448 | All user-facing text must use `__()` localization |

---

## Data Involved
**Reads:**
- `users` table for registration dates and counts
- `tenants` table for cook addition dates
- `orders` table for order volume and active user calculation
- Milestone thresholds (configurable or hardcoded)

**Creates:**
- Nothing

**Updates:**
- Nothing

---

## Acceptance Criteria
- **Given** an admin, **when** viewing growth metrics, **then** summary cards show correct totals
- **Given** the registrations chart, **when** loaded, **then** it shows monthly new users
- **Given** the cooks chart, **when** loaded, **then** it shows monthly new tenant additions
- **Given** the order volume chart, **when** loaded, **then** it shows monthly order counts
- **Given** comparison mode, **when** enabled, **then** growth percentages are displayed
- **Given** a milestone is reached, **when** viewing the page, **then** the milestone is highlighted

---

## Verification Steps
1. Verify summary cards match actual database counts
2. Verify new registrations chart is accurate
3. Verify new cooks chart is accurate
4. Verify order volume chart is accurate
5. Verify active users count matches orders data
6. Enable comparison and verify growth percentages
7. Trigger a milestone (e.g., 100th user) and verify it appears

---

## Edge Cases & Exceptions
| Condition | Expected Behavior |
|-----------|-------------------|
| Platform just launched (< 1 month data) | Charts show available data; comparison shows N/A |
| No new users in a month | Chart shows zero for that month |
| Milestone already passed | Shown in milestone history with the date achieved |
| Very old platform (years of data) | "All Time" view uses monthly granularity; charts remain readable |

---

## UI/UX Notes
- Growth section in admin panel sidebar under "Analytics" > "Growth"
- Summary cards in a 4-column grid
- Line/area charts for registrations, order volume, active users
- Bar chart for new cooks
- Growth percentage badges on summary cards (+12% or -5% in green/red)
- Milestone banner or timeline along the right side
- Date range selector toolbar
- All interactions via Gale

---

## Related Features
| Code | Feature | Relationship |
|------|---------|-------------|
| F-057 | Admin Dashboard | Admin panel shell |
| F-205 | Admin Platform Revenue Analytics | Sibling admin analytics |
| F-206 | Admin Cook Performance Metrics | Sibling admin analytics |
| F-208 | Analytics CSV/PDF Export | Export this data |
