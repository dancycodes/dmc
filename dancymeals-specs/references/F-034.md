# F-034 — Delivery Address List

> Module: User Settings
> Type: functional
> Priority: Must-have
> Precedence: F-033

---

## What It Does

Displays all of the user's saved delivery addresses in a list. Each address shows its label,
town, quarter, and neighbourhood. The default address is visually marked. Users can set any
address as default, and access links to edit or delete each address.

---

## Who Uses It

- **All authenticated users** managing their saved delivery addresses.

---

## User Scenarios

### Happy Path
1. User navigates to their delivery addresses from the profile page (F-030).
2. The page displays a list of all saved addresses.
3. Each address card shows: label, town name, quarter name, neighbourhood, and a "Default" badge if applicable.
4. Action buttons are available on each address: "Edit" and "Delete."
5. A "Set as Default" button appears on non-default addresses.
6. An "Add Address" button is available if the user has fewer than 5 addresses.

### Alternate Path — No Addresses
1. User has no saved addresses.
2. The page shows an empty state: "You have no saved addresses."
3. An "Add Your First Address" button is prominently displayed.

### Alternate Path — Set as Default
1. User clicks "Set as Default" on a non-default address.
2. The selected address becomes the default (badge moves).
3. The previously default address loses its default status.
4. Update happens via Gale without page reload.
5. Toast: "Default address updated."

---

## Business Rules

| Code | Rule |
|------|------|
| BR-128 | All of the user's saved addresses are displayed, ordered with the default first. |
| BR-129 | The default address is visually distinguished (badge, star, or highlight). |
| BR-130 | Only one address can be the default at a time. |
| BR-131 | Setting a new default automatically removes the default status from the previous one. |
| BR-132 | The "Add Address" button is only shown if the user has fewer than 5 addresses. |
| BR-133 | Each address has links/buttons for edit (F-035) and delete (F-036). |
| BR-134 | Address data displayed must use the localized town and quarter names (using the user's preferred language). |

---

## Data Involved

### Address Model (read, list)
| Field | Display |
|-------|---------|
| label | Address label (e.g., "Home") |
| town (relation) | Town name (localized) |
| quarter (relation) | Quarter name (localized) |
| neighbourhood | Neighbourhood text |
| is_default | Visual badge/indicator |

---

## Acceptance Criteria

```
Given I have saved addresses
When I navigate to my delivery addresses page
Then I see all my addresses listed with label, town, quarter, and neighbourhood

Given I have a default address
When I view the list
Then the default address has a visible "Default" badge

Given I click "Set as Default" on a non-default address
When the update processes
Then that address becomes the default and the old default loses its badge

Given I have no saved addresses
When I view the delivery addresses page
Then I see an empty state message with an "Add Address" button

Given I have 5 addresses
When I view the page
Then the "Add Address" button is not displayed

Given I view the address list
When I look at each address card
Then I see "Edit" and "Delete" action buttons
```

---

## Verification Steps

1. Add 2-3 addresses and confirm they all appear in the list.
2. Verify the default address shows a "Default" badge.
3. Set a different address as default — confirm the badge moves.
4. Remove all addresses and confirm the empty state is displayed.
5. Add 5 addresses and confirm the "Add Address" button is hidden.

---

## Edge Cases

- A town or quarter referenced by an address has been renamed — the address should display the updated name.
- User has exactly one address — "Set as Default" is not shown (it is already default by BR-125).
- All addresses have `is_default = false` due to a data issue — display all normally but show none as default.

---

## UI/UX Notes

- Card-based list on mobile, table-like on desktop.
- The default address card may have a subtle highlight or border color.
- "Set as Default" is a small secondary button or icon on each card.
- "Edit" and "Delete" are icon buttons or text links on each card.
- Empty state has a friendly illustration or icon.
- Light/dark mode support.
- All updates happen via Gale without page reload.

---

## Related Features

- **F-030** — Profile View (links to this page)
- **F-033** — Add Delivery Address (adds entries to this list)
- **F-035** — Edit Delivery Address (edit action from this list)
- **F-036** — Delete Delivery Address (delete action from this list)
