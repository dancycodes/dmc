# F-016 â€” Base Layout & Responsive Navigation

> Module: Foundation
> Priority: Must-have
> Precedence: F-009, F-007
> Type: foundation

---

## What It Does
Creates the foundational Blade layouts and responsive navigation components that every page in DancyMeals uses. Implements four distinct layout variants: main domain public, tenant domain public, admin panel (`/vault-entry`), and cook dashboard. All layouts are 100% responsive with a mobile-first approach. Each layout includes the language switcher (F-008), theme switcher (F-010), authentication links, and a notification bell placeholder. Mobile layouts use a hamburger menu; desktop layouts use a sidebar or top navigation depending on the context.

---

## Who Uses It
| Role | Interaction |
|------|-------------|
| Client | Navigates the platform using the responsive navigation on any domain |
| Cook | Uses the cook dashboard layout with sidebar navigation |
| Admin | Uses the admin panel layout at `/vault-entry` |
| Guest | Uses the public layout on main or tenant domains |

---

## User Scenarios
### Scenario 1: Mobile user navigates the main domain
A user on their phone visits `dm.test`. They see a compact header with the DancyMeals logo, a hamburger menu icon, and a theme/language quick-access area. Tapping the hamburger reveals a slide-out menu with navigation links, auth options, and settings.

### Scenario 2: Cook uses dashboard on desktop
A cook logs into their dashboard on desktop. They see a persistent sidebar on the left with navigation links (Home, Meals, Orders, Brand, Locations, Settings, etc.), a top bar with their profile, notifications bell, and language/theme switchers.

### Scenario 3: Admin accesses the admin panel
An admin navigates to `/vault-entry`. The layout switches to the admin panel variant with admin-specific navigation (Tenants, Users, Roles, Financials, Complaints, Settings, Activity Log).

---

## Business Rules
| Code | Rule |
|------|------|
| BR-122 | Four layout variants: main-public, tenant-public, admin-panel, cook-dashboard |
| BR-123 | All layouts must be 100% responsive, mobile-first |
| BR-124 | Mobile navigation uses a hamburger menu with a slide-out or full-screen overlay |
| BR-125 | Desktop cook dashboard and admin panel use a collapsible sidebar |
| BR-126 | The language switcher (F-008) and theme switcher (F-010) must be accessible in all layouts |
| BR-127 | Authentication links (Login/Register or Profile/Logout) must be in the navigation |
| BR-128 | A notification bell icon (placeholder, functional in later features) must be in the navigation for authenticated users |
| BR-129 | The admin panel layout is only rendered at `/vault-entry/*` on the main domain |
| BR-130 | The cook dashboard layout is rendered for authenticated cooks/managers on tenant domains |
| BR-131 | The tenant-public layout shows the cook's branding (logo, name) in the header |
| BR-132 | All navigation must use Gale SPA navigation (no full page reloads) |
| BR-133 | A global loading indicator must appear during Gale navigation transitions |
| BR-134 | All text in navigation must use `__()` for localization |

---

## Data Involved
**Creates:**
- `resources/views/layouts/app.blade.php` (base layout with common head/scripts)
- `resources/views/layouts/main-public.blade.php` (main domain public)
- `resources/views/layouts/tenant-public.blade.php` (tenant domain public)
- `resources/views/layouts/admin.blade.php` (admin panel at /vault-entry)
- `resources/views/layouts/cook-dashboard.blade.php` (cook/manager dashboard)
- Navigation Blade components (header, sidebar, mobile menu, footer)
- Global loading indicator component

**Reads:**
- Current tenant context (F-004) to determine layout variant
- Authenticated user and role to show appropriate navigation items
- Current locale for localized navigation text

**Updates:**
- Base layout `<head>` with meta tags, manifest link, service worker registration
- Existing welcome/home page to use the new layout

**Relationships:**
- Every page in the application extends one of these layouts
- Includes F-008 (Language Switcher) and F-010 (Theme Switcher) components
- F-013 (PWA Install Prompt) banner renders within these layouts

---

## Acceptance Criteria
- **Given** a mobile viewport (375px), **when** viewing any page, **then** the layout is fully responsive with no horizontal scroll
- **Given** a desktop viewport, **when** viewing the cook dashboard, **then** a sidebar navigation is visible
- **Given** the main domain, **when** viewing a public page, **then** the main-public layout is used with DancyMeals branding
- **Given** a tenant domain, **when** viewing a public page, **then** the tenant-public layout is used with the cook's branding
- **Given** an authenticated user, **when** viewing the navigation, **then** the notification bell, profile link, and logout option are visible
- **Given** a guest user, **when** viewing the navigation, **then** Login and Register links are visible
- **Given** any navigation link, **when** clicked, **then** Gale SPA navigation is used (no full page reload) and the loading indicator appears
- **Given** the language and theme switchers, **when** viewing any layout, **then** they are accessible in the navigation area

---

## Verification Steps
1. View the main domain on mobile (375px) and confirm responsive layout with hamburger menu
2. View the main domain on desktop and confirm full navigation bar
3. Log in as a cook and confirm the cook dashboard sidebar layout renders
4. Navigate to `/vault-entry` as an admin and confirm the admin panel layout renders
5. Visit a tenant domain and confirm the cook's brand name/logo appears in the header
6. Click a navigation link and confirm Gale SPA navigation (no full reload, loading indicator)
7. Confirm language and theme switchers are present in all four layout variants

---

## Edge Cases & Exceptions
| Condition | Expected Behavior |
|-----------|-------------------|
| User resizes browser from mobile to desktop | Layout adapts in real-time via CSS breakpoints |
| JavaScript disabled | Navigation still works via standard links (progressive enhancement) |
| Very long cook brand name | Truncated with ellipsis in the header |
| User has no role assigned | Treated as guest; sees public navigation only |
| Admin tries to access cook dashboard | Redirected based on role; layout enforces access |
| Notification bell with many unread notifications | Badge shows count; capped at "99+" for display |

---

## UI/UX Notes
- Mobile-first: design for 375px width first, then enhance for tablet (768px) and desktop (1024px+).
- Hamburger menu should animate smoothly (slide-in from left or right).
- Sidebar on desktop should be collapsible to icons-only mode for more content space.
- Navigation items should have clear active state indication (highlight, border, background).
- Footer on public pages with: copyright, language switcher, theme switcher, links to about/contact.
- Global loading indicator: thin progress bar at the top of the page during Gale navigation.
- All interactive elements must have appropriate touch targets (minimum 44x44px on mobile).
- Use semantic HTML (`<nav>`, `<header>`, `<main>`, `<footer>`) for accessibility.

---

## Related Features
| Code | Feature | Relationship |
|------|---------|-------------|
| F-007 | Localization System Setup | Prerequisite; navigation text uses localization |
| F-008 | Language Switcher Component | Included in all layout navigation areas |
| F-009 | Theme System (Light/Dark Mode) | Prerequisite; layouts support light/dark themes |
| F-010 | Theme Switcher Component | Included in all layout navigation areas |
| F-004 | Multi-Tenant Domain Resolution | Determines which layout variant to use |
| F-005 | Authentication Scaffolding | Auth links in navigation |
| F-013 | PWA Install Prompt | Rendered within layouts |
| F-043 | Admin Panel Layout | Extends the admin layout defined here |
| F-076 | Cook Dashboard Layout | Extends the cook dashboard layout defined here |
