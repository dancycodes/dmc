# F-038 — Payment Method List

> Module: User Settings
> Type: functional
> Priority: Must-have
> Precedence: F-037

---

## What It Does

Displays all of the user's saved payment methods in a list. Each method shows its label,
provider icon (MTN MoMo or Orange Money), and a masked phone number. The default method
is visually marked. Users can set any method as default and access links to edit or delete
each method.

---

## Who Uses It

- **All authenticated users** managing their saved mobile money payment methods.

---

## User Scenarios

### Happy Path
1. User navigates to their payment methods from the profile page (F-030).
2. The page displays a list of saved payment methods.
3. Each method card shows:
   - Label (e.g., "MTN Main")
   - Provider icon (MTN MoMo logo or Orange Money logo)
   - Masked phone number (e.g., +237 6** *** *78)
   - "Default" badge if applicable
4. Action buttons on each: "Edit" and "Delete."
5. "Set as Default" button on non-default methods.
6. "Add Payment Method" button if fewer than 3 methods exist.

### Alternate Path — No Payment Methods
1. User has no saved payment methods.
2. The page shows an empty state: "You have no saved payment methods."
3. An "Add Your First Payment Method" button is prominently displayed.

### Alternate Path — Set as Default
1. User clicks "Set as Default" on a non-default method.
2. The selected method becomes the default.
3. The previously default method loses its default status.
4. Update via Gale without page reload.
5. Toast: "Default payment method updated."

---

## Business Rules

| Code | Rule |
|------|------|
| BR-156 | All saved payment methods are displayed, ordered with the default first. |
| BR-157 | Phone numbers must be masked for security — only show last 2 digits (e.g., +237 6** *** *78). |
| BR-158 | Provider is displayed with its icon/logo (MTN MoMo in yellow, Orange Money in orange). |
| BR-159 | Only one payment method can be the default at a time. |
| BR-160 | Setting a new default removes the default status from the previous one. |
| BR-161 | "Add Payment Method" button is only shown if user has fewer than 3 methods. |
| BR-162 | Each method has links/buttons for edit (F-039) and delete (F-040). |

---

## Data Involved

### PaymentMethod Model (read, list)
| Field | Display |
|-------|---------|
| label | Method label (e.g., "MTN Main") |
| provider | Provider icon/name |
| phone | Masked: +237 6** *** *XX |
| is_default | Visual badge/indicator |

---

## Acceptance Criteria

```
Given I have saved payment methods
When I navigate to my payment methods page
Then I see all methods with label, provider icon, and masked phone number

Given I have a default payment method
When I view the list
Then the default method has a visible "Default" badge

Given I click "Set as Default" on a non-default method
When the update processes
Then that method becomes the default and the old default loses its badge

Given I have no payment methods
When I view the page
Then I see an empty state with an "Add Payment Method" button

Given I have 3 methods
When I view the page
Then the "Add Payment Method" button is not displayed

Given I view a payment method's phone number
When I look at the displayed number
Then it is masked with only the last 2 digits visible
```

---

## Verification Steps

1. Add 2 payment methods and confirm they both appear in the list.
2. Verify phone numbers are masked (only last 2 digits visible).
3. Verify provider icons are displayed correctly for MTN and Orange.
4. Set a different method as default — confirm badge updates.
5. Remove all methods and confirm empty state displays.

---

## Edge Cases

- User has only one method — "Set as Default" is not shown (already default by BR-152).
- All methods have `is_default = false` due to data issue — display all normally.
- Provider icon fails to load — fall back to provider name text.

---

## UI/UX Notes

- Card-based list with provider color coding (MTN: yellow accent, Orange: orange accent).
- Masked phone number displayed in a monospaced or distinctly styled font.
- Mobile-first: stacked cards with clear touch targets.
- "Set as Default" is a small secondary button or star icon toggle.
- Light/dark mode support.
- All updates via Gale without page reload.

---

## Related Features

- **F-030** — Profile View (links to this page)
- **F-037** — Add Payment Method (adds entries to this list)
- **F-039** — Edit Payment Method (edit action from this list)
- **F-040** — Delete Payment Method (delete action from this list)
