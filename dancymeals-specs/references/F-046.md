# F-046 — Tenant List & Search View

> Module: Admin
> Priority: Must-have
> Precedence: F-043
> Type: functional

---

## What It Does
Displays a paginated, searchable, sortable list of all tenants in the admin panel. Admins can search by name or domain, filter by status, and sort by any column. Each row is clickable to navigate to the tenant's detail page. Provides a quick overview of each tenant's key metrics.

---

## Who Uses It
| Role | Interaction |
|------|-------------|
| Super-Admin | Views, searches, and manages all tenants |
| Admin | Views, searches, and manages all tenants |

---

## User Scenarios
### Scenario 1: Browsing all tenants
An admin navigates to Tenants in the sidebar. A paginated table loads showing all tenants with columns: name, subdomain, domain, cook name, status, order count, and created date. Default sorting is by creation date (newest first), 15 tenants per page.

### Scenario 2: Searching for a tenant
The admin types "amara" in the search bar. The table filters to show only tenants whose name, subdomain, or custom domain contain "amara". Results update as the admin types (debounced search).

### Scenario 3: Filtering by status
The admin selects "Inactive" from the status filter dropdown. Only inactive tenants are displayed. The active count and inactive count are shown in the filter area.

### Scenario 4: Sorting by order count
The admin clicks the "Orders" column header. The table sorts by total order count descending. Clicking again toggles to ascending. A sort indicator arrow shows the current sort direction.

### Scenario 5: Navigating to tenant detail
The admin clicks a row for "Chef Amara's Kitchen". They are navigated to the tenant detail page (F-047) via Gale navigation (no full page reload).

---

## Business Rules
| Code | Rule |
|------|------|
| BR-064 | Tenant list is paginated with 15 items per page (configurable) |
| BR-065 | Search covers: name_en, name_fr, subdomain, custom_domain |
| BR-066 | Status filter options: All, Active, Inactive |
| BR-067 | Default sort: created_at descending (newest first) |
| BR-068 | All columns are sortable: name, subdomain, domain, cook name, status, order count, created date |
| BR-069 | Order count is an aggregate of all orders for the tenant (all statuses) |

---

## Data Involved
**Reads:**
- Tenants table: name_en, name_fr, subdomain, custom_domain, status, created_at
- Cook (user) associated with each tenant: name
- Orders count per tenant (aggregate)

**Creates:**
- Nothing

**Updates:**
- Nothing

**Relationships:**
- F-045: Tenants created here appear in this list
- F-047: Clicking a row navigates to tenant detail

---

## Acceptance Criteria
- **Given** tenants exist in the database, **when** navigating to the tenant list page, **then** a paginated table of tenants is displayed
- **Given** a search term, **when** typed in the search bar, **then** the table filters to matching tenants in real-time
- **Given** the status filter set to "Inactive", **when** applied, **then** only inactive tenants are shown
- **Given** a column header click, **when** clicking the "Orders" header, **then** the table sorts by order count
- **Given** a tenant row, **when** clicked, **then** the admin is navigated to that tenant's detail page
- **Given** more than 15 tenants, **when** viewing the list, **then** pagination controls appear at the bottom

---

## Verification Steps
1. Navigate to tenant list with 20+ tenants — confirm pagination appears
2. Search for a specific tenant name — confirm results filter correctly
3. Filter by "Inactive" status — confirm only inactive tenants shown
4. Click "Orders" column header — confirm sort order changes with visual indicator
5. Click a tenant row — confirm navigation to detail page

---

## Edge Cases & Exceptions
| Condition | Expected Behavior |
|-----------|-------------------|
| No tenants exist | Empty state: "No tenants yet. Create your first tenant." with a link to the creation form |
| Search returns no results | Empty state: "No tenants match your search." with option to clear search |
| Tenant has no cook assigned | Cook column shows "Unassigned" in muted/italic text |
| Tenant name contains special characters | Properly escaped and displayed |
| Very long subdomain or domain | Truncated with ellipsis, full value shown on hover |

---

## UI/UX Notes
- Summary cards above the table: Total Tenants, Active, Inactive
- Search bar with search icon at the top of the table
- Status filter as a dropdown or segmented control next to search
- Table rows have hover highlight for click affordance
- Status displayed as colored badges: green for Active, gray for Inactive
- Mobile: table converts to card layout with key fields visible
- Pagination shows: "Showing 1-15 of 47 tenants" with page navigation
- "Create Tenant" button in the top-right corner

---

## Related Features
| Code | Feature | Relationship |
|------|---------|-------------|
| F-043 | Admin Panel Layout | Parent layout |
| F-045 | Tenant Creation Form | Linked via "Create Tenant" button |
| F-047 | Tenant Detail View | Navigated to from row click |
| F-048 | Tenant Edit & Status Toggle | Accessible from tenant detail |
