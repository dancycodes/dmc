# F-094 â€” Edit Pickup Location

> Module: Location
> Priority: Must-have
> Precedence: F-093
> Type: functional

---

## What It Does

Allows the cook to edit an existing pickup location's details: name (en/fr), town, quarter, and address/description. The edit form pre-populates with current values. Validates required fields. Saves via Gale without page reload. Changes apply to new orders; existing orders referencing this pickup location retain their original data.

---

## Who Uses It

| Role | Interaction |
|------|-------------|
| Cook | Updates pickup location details |
| Manager | Edits pickup locations if granted location management permission |

---

## User Scenarios

### Scenario 1: Edit address
A cook clicks "Edit" on "My Kitchen." They update the address from "Behind Akwa Palace Hotel" to "Behind Akwa Palace Hotel, 2nd floor." They save. The list updates.

### Scenario 2: Change town and quarter
A cook moves their kitchen to a new area. They change the town from "Douala" to "Yaounde" and select a quarter in Yaounde. The cascading quarter dropdown updates when the town changes.

### Scenario 3: Update name translations
A cook corrects the French name from "Ma Cuisin" to "Ma Cuisine." They save and the corrected name appears.

### Scenario 4: Cancel edit
A cook opens the edit form, makes changes, then clicks "Cancel." No changes are saved.

---

## Business Rules

| Code | Rule |
|------|------|
| BR-295 | Location name required in both English and French |
| BR-296 | Town and quarter selection required |
| BR-297 | Address/description required; max 500 characters |
| BR-298 | Save via Gale; list updates without page reload |
| BR-299 | Changes apply to new orders; existing orders retain original data |
| BR-300 | Edit action requires location management permission |

---

## Data Involved

**Reads:**
- Current pickup location data (for pre-population)
- Available towns and quarters (for dropdowns)

**Updates:**
- Pickup location record: name_en, name_fr, town_id, quarter_id, address, updated_at

---

## Acceptance Criteria

- **Given** the edit form, **when** the cook updates fields and saves, **then** changes are persisted and the list updates
- **Given** a cleared required field, **when** saving, **then** a validation error is shown
- **Given** a town change, **when** the town dropdown updates, **then** the quarter dropdown refreshes with quarters for the new town
- **Given** the cook clicks "Cancel", **when** the form closes, **then** no changes are saved
- **Given** a successful edit, **when** checking an existing order referencing this location, **then** the order retains the original address

---

## Verification Steps

1. Edit the address and confirm the update appears in the list
2. Change the town and verify the quarter dropdown refreshes
3. Clear a required field and confirm validation error
4. Cancel an edit and confirm original data unchanged
5. Verify no page reload on save

---

## Edge Cases & Exceptions

| Condition | Expected Behavior |
|-----------|-------------------|
| Selected quarter deleted since location was created | Quarter dropdown shows "Select a quarter" prompt; must select a new one |
| Network error during save | Error toast; form data preserved for retry |
| Concurrent edits | Last save wins |
| Address with special characters or line breaks | Accepted and stored correctly |

---

## UI/UX Notes

- Inline edit form or modal with pre-populated fields
- Cascading town/quarter dropdowns (quarter refreshes when town changes)
- Address textarea with character counter
- "Save" and "Cancel" buttons
- Loading state on Save during submission
- Success: list row updates; toast notification

---

## Related Features

| Code | Feature | Relationship |
|------|---------|-------------|
| F-093 | Pickup Location List View | Edit initiated from this list |
| F-092 | Add Pickup Location | Same form structure |
| F-095 | Delete Pickup Location | Alternative action |
