# F-030 — Profile View

> Module: Auth
> Type: functional
> Priority: Must-have
> Precedence: F-024

---

## What It Does

Displays the authenticated user's profile page. Shows their name, email (with verified badge
if verified), phone number, profile photo, preferred language, and account creation date.
Provides links to edit profile, manage addresses, manage payment methods, and notification
preferences. Accessible from any domain.

---

## Who Uses It

- **All authenticated users** (any role) viewing their own profile.

---

## User Scenarios

### Happy Path
1. Authenticated user clicks their name/avatar in the navigation.
2. User selects "Profile" from the dropdown menu.
3. The profile page loads showing:
   - Profile photo (or default avatar placeholder)
   - Full name
   - Email address with a green "Verified" badge (or amber "Unverified" warning)
   - Phone number
   - Preferred language (English or French)
   - Member since date (e.g., "Member since January 2026")
4. Below the profile info, action links are displayed:
   - Edit Profile (F-032)
   - Change Photo (F-031)
   - Delivery Addresses (F-034)
   - Payment Methods (F-038)
   - Notification Preferences (F-041)
   - Language Preference (F-042)

### Alternate Path — Unverified Email
1. User views their profile.
2. Next to the email, an amber "Unverified" badge is shown.
3. A small "Verify now" link is available, directing to resend verification (F-023).

### Alternate Path — No Profile Photo
1. User has not uploaded a profile photo.
2. A default avatar placeholder (initials or generic icon) is displayed.

---

## Business Rules

| Code | Rule |
|------|------|
| BR-097 | The profile page is only accessible to authenticated users. |
| BR-098 | Users can only view their own profile (not other users' profiles from this page). |
| BR-099 | Email verification status must be visually indicated (verified badge or unverified warning). |
| BR-100 | The profile page must be accessible from any domain (main or tenant). |
| BR-101 | All text on the profile page must be localized via `__()`. |
| BR-102 | The member since date must be formatted according to the user's preferred language locale. |

---

## Data Involved

### User Model (read)
| Field | Display |
|-------|---------|
| name | Full name |
| email | Email address |
| email_verified_at | Determines verified/unverified badge |
| phone | Phone number |
| photo | Profile photo URL or null |
| preferred_language | "English" or "French" |
| created_at | Formatted as "Member since {month} {year}" |

---

## Acceptance Criteria

```
Given I am an authenticated user
When I navigate to my profile page
Then I see my name, email, phone, preferred language, and member since date

Given my email is verified
When I view my profile
Then I see a "Verified" badge next to my email

Given my email is not verified
When I view my profile
Then I see an "Unverified" warning next to my email with a "Verify now" link

Given I have uploaded a profile photo
When I view my profile
Then my photo is displayed

Given I have not uploaded a profile photo
When I view my profile
Then a default avatar placeholder is displayed

Given I am on my profile page
When I look for action links
Then I see links to edit profile, manage addresses, manage payment methods, notification preferences, and language preference
```

---

## Verification Steps

1. Log in and navigate to the profile page — confirm all personal information is displayed.
2. Verify the email badge shows "Verified" for a verified user and "Unverified" for an unverified user.
3. Check that the default avatar appears when no photo is uploaded.
4. Confirm all action links are present and navigate to the correct pages.
5. Switch language and verify all profile page text is translated.

---

## Edge Cases

- User with a very long name or email — text should wrap or truncate gracefully.
- User who registered seconds ago — "Member since" should show the current month/year.
- Profile page accessed via a direct URL on a different domain — should still work (same user, cross-domain auth).

---

## UI/UX Notes

- Clean, card-based layout with the photo/avatar prominently displayed.
- Mobile-first: stacked layout on mobile, side-by-side on desktop.
- The profile photo area should indicate it is clickable/changeable (link to F-031).
- Action links are styled as a list or grid of cards with icons.
- Light/dark mode support.
- On tenant domains, the profile page uses the tenant's theme.

---

## Related Features

- **F-024** — User Login (prerequisite for viewing profile)
- **F-031** — Profile Photo Upload (change profile photo)
- **F-032** — Profile Basic Info Edit (edit name, phone, language)
- **F-033** — Add Delivery Address (manage delivery addresses)
- **F-034** — Delivery Address List (view saved addresses)
- **F-037** — Add Payment Method (manage payment methods)
- **F-038** — Payment Method List (view saved payment methods)
- **F-041** — Notification Preferences Management (manage notifications)
- **F-042** — Language Preference Setting (change preferred language)
