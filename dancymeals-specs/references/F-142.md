# F-142 â€” Pickup Location Selection

> Module: Ordering
> Priority: Must-have
> Precedence: F-140, F-092
> Type: functional

---

## What It Does
For pickup orders, allows the client to select from the cook's available pickup locations. Displays each pickup location with its full address details. The client selects one location via radio buttons. If only one pickup location exists, it is pre-selected automatically. Pickup is always free (no fee). After selection, the client proceeds to the phone number step.

---

## Who Uses It
| Role | Interaction |
|------|-------------|
| Client (authenticated) | Selects a pickup location during checkout |

---

## User Scenarios
### Scenario 1: Choosing from multiple pickup locations
The client chose pickup and sees 2 options: "Chef Latifa's Kitchen - Akwa, Rue des Manguiers, Douala" and "Marche Centrale Stand 12 - Deido, Douala." Each shows the full address. The client selects the kitchen location.

### Scenario 2: Single pickup location
The cook has only one pickup location. It is automatically selected with a message: "Pickup at: Chef Latifa's Kitchen - Akwa, Douala." The client simply confirms and proceeds.

### Scenario 3: Viewing pickup details
Each pickup option shows the location name, full address, and any special instructions from the cook (e.g., "Ring the doorbell at the blue gate").

---

## Business Rules
| Code | Rule |
|------|------|
| BR-284 | All configured pickup locations for the cook are displayed |
| BR-285 | Each pickup location shows: name, full address (quarter, town), special instructions (if any) |
| BR-286 | Client must select exactly one pickup location |
| BR-287 | If only one pickup location exists, it is pre-selected automatically |
| BR-288 | Pickup is always free; "Free" label displayed next to each option |
| BR-289 | The selected pickup location is stored in the checkout session/order draft |
| BR-290 | All text must be localized via `__()` |
| BR-291 | Location names and addresses displayed in the user's current language |

---

## Data Involved
**Reads:**
- Cook's pickup locations: name, address, quarter, town, special instructions

**Creates:**
- Pickup location selection in checkout session/order draft

**Updates:**
- Checkout session with selected pickup location

**Relationships:**
- Follows F-140 (Delivery/Pickup Choice Selection)
- Uses pickup location data from F-092 (Pickup Location Management)
- Leads to F-143 (Order Phone Number)

---

## Acceptance Criteria
- **Given** a cook with 3 pickup locations, **when** this step loads, **then** all 3 options are displayed
- **Given** a cook with 1 pickup location, **when** this step loads, **then** the single location is pre-selected
- **Given** a pickup location with special instructions, **when** viewing the option, **then** instructions are displayed
- **Given** the client selects a location, **when** proceeding, **then** the selection is saved and the next step loads
- **Given** no selection is made, **when** attempting to proceed, **then** a validation error is shown

---

## Verification Steps
1. Select pickup and verify all pickup locations are displayed
2. Verify each location shows name, address, and "Free" label
3. Test with a cook that has 1 pickup location; verify auto-selection
4. Select a location and proceed; verify selection is saved
5. Test with a location that has special instructions; verify they display

---

## Edge Cases & Exceptions
| Condition | Expected Behavior |
|-----------|-------------------|
| Cook has no pickup locations | This step should not be reachable (handled by F-140 disabling pickup) |
| Pickup location deactivated while client is in checkout | Show error and redirect back to delivery/pickup choice |
| Very long special instructions | Text wraps; no truncation for instructions |
| Pickup location name in only one language | Show the available language version |

---

## UI/UX Notes
- Pickup locations displayed as selectable cards with radio button behavior
- Each card shows: location name (bold), address, "Free" badge in green
- Special instructions in italics or a muted info box below the address
- Map pin icon next to each location
- Pre-selected location has accent border
- "Back" button to return to delivery/pickup choice
- "Continue" button to proceed
- Step indicator showing progress

---

## Related Features
| Code | Feature | Relationship |
|------|---------|-------------|
| F-140 | Delivery/Pickup Choice Selection | Previous step |
| F-092 | Pickup Location Management | Source of pickup location data |
| F-143 | Order Phone Number | Next step after selection |
