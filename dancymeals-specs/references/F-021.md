# F-021 — User Registration Form

> Module: Auth
> Type: functional
> Priority: Must-have
> Precedence: F-005, F-016, F-018

---

## What It Does

Displays a user registration form accessible on any domain (main or tenant). Collects
name, email, phone number, password, and password confirmation. Includes Spatie Honeypot
protection. On tenant domains, shows the tenant's branding alongside a clear indication
that the user is creating a DancyMeals account. Provides a link to the login page.

---

## Who Uses It

- **Visitors** (unauthenticated users) on any domain who want to create an account.

---

## User Scenarios

### Happy Path
1. Visitor navigates to the registration page on the main domain.
2. The form displays: name, email, phone number, password, password confirmation fields.
3. A honeypot hidden field is present (invisible to users).
4. Visitor fills in all fields with valid data.
5. Visitor clicks the register button.
6. Form submits to the registration submission endpoint (F-022).

### Alternate Path — Tenant Domain Registration
1. Visitor is browsing a cook's tenant site (e.g., latifa.dancymeals.com).
2. Visitor clicks "Register" or "Sign Up" in the navigation.
3. The registration page loads with the tenant's branding (logo, colors, theme).
4. A notice reads: "You are creating a DancyMeals account. Use it on any cook's site."
5. Visitor fills in the form and submits.

### Alternate Path — Already Authenticated
1. An authenticated user navigates to the registration page.
2. They are redirected to the home/dashboard page of the current domain.

### Error Path — Bot Submission
1. A bot fills in the honeypot field and submits the form.
2. The submission is silently rejected (no error message displayed to the bot).

---

## Business Rules

| Code | Rule |
|------|------|
| BR-021 | The registration form must be accessible on every domain (main and all tenants). |
| BR-022 | The form must include Spatie Honeypot hidden fields on every render. |
| BR-023 | On tenant domains, the tenant's branding (logo, name, theme) must be displayed. |
| BR-024 | On tenant domains, a visible notice must clarify that the account is a DancyMeals account, not a tenant-specific account. |
| BR-025 | All user-facing text must use `__('English text')` localization. |
| BR-026 | Authenticated users must be redirected away from the registration page. |
| BR-027 | A link to the login page must be visible on the registration form. |

---

## Data Involved

| Field | Type | Required | Notes |
|-------|------|----------|-------|
| name | text input | Yes | Full name |
| email | email input | Yes | Valid email format |
| phone | tel input | Yes | Cameroon phone number (+237) |
| password | password input | Yes | Minimum strength requirements |
| password_confirmation | password input | Yes | Must match password |
| honeypot fields | hidden | Yes (auto) | Spatie Honeypot — invisible to users |

---

## Acceptance Criteria

```
Given I am an unauthenticated visitor on the main domain
When I navigate to the registration page
Then I see a form with name, email, phone, password, and password confirmation fields

Given I am an unauthenticated visitor on a tenant domain
When I navigate to the registration page
Then I see the tenant's branding and a notice that this is a DancyMeals account

Given I am on the registration page
When I view the page source or inspect the form
Then I see Spatie Honeypot hidden fields present in the form

Given I am an authenticated user
When I navigate to the registration page
Then I am redirected to the home or dashboard page

Given I am on the registration page
When I look below the form
Then I see a link to the login page

Given I switch the language to French
When I view the registration page
Then all labels, placeholders, and text are displayed in French
```

---

## Verification Steps

1. Open the registration page on the main domain and confirm all five form fields are present.
2. Open the registration page on a tenant domain and verify tenant branding is shown with the DancyMeals account notice.
3. Inspect the form HTML and confirm Spatie Honeypot hidden fields are rendered.
4. Log in, then navigate to the registration URL — confirm redirect to home/dashboard.
5. Click the login link on the registration page and confirm it navigates to the login page.
6. Switch language to French and verify all registration page text is translated.

---

## Edge Cases

- Visitor accesses registration on a tenant domain whose cook account is deactivated — show the form normally since registration is platform-level, not cook-level.
- Visitor has JavaScript disabled — the form should still be functional (server-side rendering).
- Very long names or email addresses — the form fields should handle standard maximum lengths gracefully.

---

## UI/UX Notes

- Mobile-first layout: single column, large touch targets for inputs.
- Light/dark mode support via the active theme.
- On tenant domains, the tenant logo appears above the form; the DancyMeals notice is subtle but readable (e.g., small text below the heading).
- Password field should have a show/hide toggle.
- Phone field should show a +237 prefix indicator.
- The register button should be prominent and full-width on mobile.

---

## Related Features

- **F-005** — Authentication Scaffolding (provides auth routes and controllers)
- **F-016** — Base Layout & Responsive Navigation (provides the page layout)
- **F-018** — Honeypot Protection Setup (provides honeypot middleware and blade directive)
- **F-022** — User Registration Submission (processes this form)
- **F-024** — User Login (linked from this page)
