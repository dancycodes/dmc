# F-083 — Town List View

> Module: Location
> Priority: Must-have
> Precedence: F-082
> Type: functional

---

## What It Does

Displays a list of all towns the cook delivers to within the Locations section of the dashboard. Each town entry shows the town name (in current locale), number of quarters within it, and total delivery coverage summary. Clicking a town expands or navigates to manage its quarters. Each town has links/buttons to edit and delete.

---

## Who Uses It

| Role | Interaction |
|------|-------------|
| Cook | Views and manages their delivery towns |
| Manager | Views towns if granted location view permission |

---

## User Scenarios

### Scenario 1: View town list
A cook navigates to Locations in the dashboard. They see a list of 3 towns: "Douala (5 quarters)", "Yaounde (3 quarters)", "Bafoussam (2 quarters)." Each town has Edit and Delete action buttons.

### Scenario 2: Expand to manage quarters
A cook clicks on "Douala" in the town list. The view expands (or navigates) to show the quarters within Douala, with options to add, edit, and delete quarters.

### Scenario 3: Empty town list
A newly set-up cook with no towns sees: "No towns added yet. Add your first delivery town." with a prominent "Add Town" button.

### Scenario 4: Delete a town
A cook clicks the Delete button on "Bafoussam." A confirmation dialog appears. After confirming, the town is removed from the list (see F-085 for full delete logic).

---

## Business Rules

| Code | Rule |
|------|------|
| BR-213 | Town list shows all towns for the current tenant |
| BR-214 | Each town entry displays: town name (in current locale), quarter count, edit link, delete link |
| BR-215 | Towns are displayed in alphabetical order by name in the current locale |
| BR-216 | Clicking a town navigates to or expands its quarter management view |
| BR-217 | Empty state shown when no towns exist |
| BR-218 | Town list updates via Gale when towns are added or removed (no page reload) |

---

## Data Involved

**Reads:**
- Towns for this tenant (name_en, name_fr)
- Quarter count per town
- User permissions (to show/hide edit/delete actions)

**Creates:**
- Nothing

**Updates:**
- Nothing (display only)

---

## Acceptance Criteria

- **Given** towns exist for this tenant, **when** the cook navigates to Locations, **then** all towns are listed with quarter counts
- **Given** no towns exist, **when** the cook navigates to Locations, **then** an empty state with "Add Town" prompt is shown
- **Given** a town with 5 quarters, **when** viewing the list, **then** the quarter count shows "5 quarters"
- **Given** a town, **when** the cook clicks on it, **then** the quarter management view for that town is displayed
- **Given** a town list, **when** a new town is added, **then** the list updates without page reload

---

## Verification Steps

1. Navigate to Locations with seeded towns — confirm all towns listed
2. Verify quarter count is accurate for each town
3. Click a town and confirm quarter management opens
4. Verify Edit and Delete buttons are present on each town
5. Delete all towns and confirm empty state message
6. Switch language and confirm town names update to current locale

---

## Edge Cases & Exceptions

| Condition | Expected Behavior |
|-----------|-------------------|
| Town with 0 quarters | Shows "0 quarters" — still listed |
| Many towns (20+) | List is scrollable; no pagination needed for typical use |
| Town name very long | Truncated with ellipsis in the list |
| Concurrent add by another manager | List updates on next Gale refresh |

---

## UI/UX Notes

- Card or list item format for each town
- Town name as primary text, quarter count as secondary/badge
- Edit (pencil icon) and Delete (trash icon) buttons on each row
- Click/tap on the town card to expand or navigate to quarters
- "Add Town" button prominent at the top or in empty state
- Responsive: full-width cards on mobile, compact list on desktop
- Breadcrumb: Dashboard > Locations

---

## Related Features

| Code | Feature | Relationship |
|------|---------|-------------|
| F-082 | Add Town | Adds towns to this list |
| F-084 | Edit Town | Edit action from this list |
| F-085 | Delete Town | Delete action from this list |
| F-087 | Quarter List View | Shown when a town is expanded/clicked |
