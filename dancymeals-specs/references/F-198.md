# F-198 â€” Favorites List View

> Module: Favorites
> Priority: Should-have
> Precedence: F-196
> Type: functional

---

## What It Does
Displays the authenticated user's favorites page with two tabs: Favorite Cooks and Favorite Meals. The Favorite Cooks tab shows cook cards with links to their tenant site. The Favorite Meals tab shows meal cards with links to the meal detail page on the respective tenant domain. Each item has a remove-from-favorites option. Empty states are shown when no favorites exist in either category. The page is accessible from the user's profile/settings navigation.

---

## Who Uses It
| Role | Interaction |
|------|-------------|
| Client | Views and manages their list of favorite cooks and meals |

---

## User Scenarios
### Scenario 1: View favorite cooks
The client navigates to their Favorites page. The "Favorite Cooks" tab is active by default. Cook cards are displayed in a grid showing cook name, cover image, rating, and delivery towns. Clicking a card navigates to the cook's tenant landing page.

### Scenario 2: View favorite meals
The client clicks the "Favorite Meals" tab. Meal cards are displayed showing meal name, image, price, and the cook's name. Clicking a card navigates to the meal detail page on the cook's tenant domain.

### Scenario 3: Remove a cook from favorites
The client hovers over a cook card and clicks the "Remove" button (or clicks the filled heart icon). The cook is removed from the list. The card disappears with a smooth animation.

### Scenario 4: Empty favorites
A new user navigates to their Favorites page. The "Favorite Cooks" tab shows: "No favorite cooks yet. Discover cooks and add them to your favorites!" with a link to the discovery page. The "Favorite Meals" tab shows a similar empty state.

### Scenario 5: Favorite meal no longer available
The client views their favorite meals. One meal has been deactivated by the cook. It appears with a dimmed card and an "Unavailable" badge. The client can remove it but cannot navigate to it.

---

## Business Rules
| Code | Rule |
|------|------|
| BR-344 | The favorites page requires authentication |
| BR-345 | Default tab is "Favorite Cooks" |
| BR-346 | Cook cards link to the cook's tenant landing page (tenant domain) |
| BR-347 | Meal cards link to the meal detail on the cook's tenant domain |
| BR-348 | Each card has a remove-from-favorites action (unfavorite) |
| BR-349 | Removal happens via Gale without page reload; card animates out |
| BR-350 | Favorites are displayed in reverse chronological order (most recently favorited first) |
| BR-351 | Deactivated/unavailable cooks or meals are shown with an "Unavailable" badge and dimmed styling |
| BR-352 | Empty states include a call-to-action link to the discovery page |
| BR-353 | Tab switching happens via Gale without page reload |
| BR-354 | Favorites are paginated (12 per page) |
| BR-355 | All user-facing text must use `__()` localization |

---

## Data Involved
**Reads:**
- `favorite_cooks` pivot table for user's favorite cooks
- `favorite_meals` pivot table for user's favorite meals
- `users` table for cook info (name, images, ratings)
- `meals` table for meal info (name, images, price)
- `tenants` table for tenant domain links

**Creates:**
- Nothing

**Updates:**
- Deletes from `favorite_cooks` or `favorite_meals` on removal

**Relationships:**
- User belongsToMany User (cooks) via `favorite_cooks`
- User belongsToMany Meal via `favorite_meals`

---

## Acceptance Criteria
- **Given** an authenticated user with favorite cooks, **when** they visit the Favorites page, **then** cook cards are displayed
- **Given** the "Favorite Meals" tab, **when** clicked, **then** meal cards are displayed
- **Given** a favorite cook, **when** the user clicks remove, **then** the cook is removed and the card disappears
- **Given** no favorites, **when** viewing either tab, **then** an empty state with a discovery link is shown
- **Given** a deactivated cook in favorites, **when** viewing the list, **then** it shows with an "Unavailable" badge
- **Given** a meal card, **when** clicked, **then** it navigates to the meal detail on the correct tenant domain

---

## Verification Steps
1. Favorite 3 cooks and verify they appear on the Favorites page
2. Favorite 3 meals and verify they appear under the Meals tab
3. Remove a cook from favorites; verify the card disappears
4. Remove a meal from favorites; verify the card disappears
5. Check empty states when no favorites exist
6. Click a cook card; verify navigation to the tenant landing page
7. Click a meal card; verify navigation to the meal detail on the tenant domain
8. Deactivate a cook; verify it shows as "Unavailable" in favorites
9. Verify pagination with more than 12 favorites

---

## Edge Cases & Exceptions
| Condition | Expected Behavior |
|-----------|-------------------|
| All favorites are unavailable | Tab shows cards with "Unavailable" badges; "Remove all unavailable" option |
| Cook's tenant domain changed | Link updated dynamically from current tenant data |
| Meal price changed since favoriting | Current price shown on the card |
| Meal image changed | Current image shown |
| User has 100+ favorites | Pagination handles it; page loads quickly |
| Favorite meal belongs to a tenant the user has never visited | Still links correctly to the tenant domain |

---

## UI/UX Notes
- Accessible from user profile menu under "Favorites" or via the main navigation
- Tabs styled as pill buttons or underlined tabs
- Cook cards: same component as discovery page cards, with a remove button overlay
- Meal cards: same component as menu cards, with a remove button overlay and cook name subtitle
- Remove button: appears on hover (desktop) or always visible (mobile)
- Removal animation: card fades/slides out; remaining cards reflow
- Empty state: centered illustration with text and CTA button
- Responsive: 1 column mobile, 2 tablet, 3 desktop
- All interactions via Gale

---

## Related Features
| Code | Feature | Relationship |
|------|---------|-------------|
| F-196 | Favorite Cook Toggle | Adds cooks to this list |
| F-197 | Favorite Meal Toggle | Adds meals to this list |
| F-066 | Discovery Page Layout | CTA link in empty state |
| F-126 | Tenant Landing Page | Destination for cook card clicks |
| F-130 | Meal Detail View | Destination for meal card clicks |
