# F-095 â€” Delete Pickup Location

> Module: Location
> Priority: Must-have
> Precedence: F-093
> Type: functional

---

## What It Does

Allows the cook to delete a pickup location. Deletion is blocked if active (non-completed, non-cancelled) orders reference this pickup location. A confirmation dialog is shown before deletion. On success, the location is removed and the list updates via Gale.

---

## Who Uses It

| Role | Interaction |
|------|-------------|
| Cook | Removes a pickup location they no longer offer |
| Manager | Deletes pickup locations if granted location management permission |

---

## User Scenarios

### Scenario 1: Delete a pickup location
A cook clicks "Delete" on "Market Stall" which has no active orders. Confirmation dialog: "Delete Market Stall? Clients will no longer be able to pick up from this location." Cook confirms. Location is removed.

### Scenario 2: Deletion blocked
A cook tries to delete "My Kitchen" which has 1 active order for pickup. Message: "Cannot delete My Kitchen because it has 1 active order for pickup."

### Scenario 3: Cancel deletion
A cook clicks "Delete," sees the confirmation, and clicks "Cancel." Location remains.

---

## Business Rules

| Code | Rule |
|------|------|
| BR-301 | Cannot delete a pickup location with active (non-completed, non-cancelled) orders |
| BR-302 | Confirmation dialog must show the location name |
| BR-303 | On success, toast notification: "Pickup location deleted successfully" |
| BR-304 | Delete action requires location management permission |
| BR-305 | List updates via Gale without page reload |

---

## Data Involved

**Reads:**
- Active orders referencing this pickup location

**Deletes:**
- Pickup location record

**Updates:**
- Pickup locations list UI (via Gale)

---

## Acceptance Criteria

- **Given** a pickup location with no active orders, **when** the cook confirms deletion, **then** the location is removed
- **Given** a pickup location with active orders, **when** the cook clicks delete, **then** deletion is blocked with a message
- **Given** the confirmation dialog, **when** "Cancel" is clicked, **then** nothing is deleted
- **Given** a successful deletion, **when** the list renders, **then** the location is gone

---

## Verification Steps

1. Delete a pickup location with no active orders and confirm removal
2. Attempt to delete one with active orders and confirm block message
3. Cancel a deletion and confirm the location remains
4. Verify no page reload on deletion

---

## Edge Cases & Exceptions

| Condition | Expected Behavior |
|-----------|-------------------|
| Last pickup location deleted | Allowed; cook has no pickup locations (delivery only) |
| Completed orders reference this location | Deletion allowed; completed orders are historical |
| Location referenced by a meal override (F-096) | Override should be removed or updated |

---

## UI/UX Notes

- Delete button (trash icon) on each pickup location row
- Confirmation dialog with location name and warning text
- "Delete" (red) and "Cancel" buttons
- Location row fades out after deletion
- Block message as toast or inline warning

---

## Related Features

| Code | Feature | Relationship |
|------|---------|-------------|
| F-093 | Pickup Location List View | Delete initiated from this list |
| F-094 | Edit Pickup Location | Alternative action |
| F-096 | Meal-Specific Location Override | Overrides may reference this location |
