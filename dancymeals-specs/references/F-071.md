# F-071 — Cook Setup Wizard Shell

> Module: Cook Onboarding
> Priority: Must-have
> Precedence: F-049, F-076
> Type: functional

---

## What It Does

After an admin creates a tenant and assigns a cook to it (F-049), the cook logs into their tenant domain and sees a guided setup wizard. The wizard has a step progress bar and four steps: 1) Brand Info, 2) Cover Images, 3) Delivery Areas, 4) Schedule & First Meal. The cook can navigate between completed and current steps. A "Go Live" button becomes enabled only when minimum setup requirements are met (brand info saved + at least 1 delivery area + at least 1 active meal). Steps can be skipped, but the wizard re-appears on the dashboard until minimum setup is complete.

---

## Who Uses It

| Role | Interaction |
|------|-------------|
| Cook | Completes the setup wizard to prepare their tenant for public visibility |
| Manager | May also complete setup steps if granted access by the cook |

---

## User Scenarios

### Scenario 1: First login after tenant creation
A cook logs in to their newly created tenant domain for the first time. The dashboard redirects them to the setup wizard at Step 1 (Brand Info). A progress bar shows 4 steps, with Step 1 highlighted as active.

### Scenario 2: Step-by-step completion
The cook completes Step 1 (Brand Info), clicks "Save & Continue", and moves to Step 2 (Cover Images). They can click "Skip" to move to Step 3, or complete Step 2. The progress bar updates to reflect completed steps with checkmarks.

### Scenario 3: Navigate back to previous step
The cook is on Step 3 and wants to edit their brand info. They click Step 1 in the progress bar and are taken back to the pre-filled Brand Info form. They make changes, save, and continue forward.

### Scenario 4: Go Live
After completing brand info, adding at least one delivery area (town + quarter), and creating at least one meal, the "Go Live" button becomes enabled. The cook clicks it, their tenant is marked as setup-complete, and they are redirected to the full dashboard.

### Scenario 5: Wizard re-appears on dashboard
A cook skipped all optional steps and only completed brand info. They navigate to the dashboard but see a prominent banner: "Complete your setup to go live" with a link back to the wizard. The banner persists until minimum requirements are met.

### Scenario 6: Returning to wizard after partial completion
A cook completed Steps 1 and 2 yesterday, then logged out. Today they log in and the wizard resumes at Step 3 (Delivery Areas), with Steps 1 and 2 shown as completed in the progress bar.

---

## Business Rules

| Code | Rule |
|------|------|
| BR-108 | Wizard has exactly 4 steps: Brand Info, Cover Images, Delivery Areas, Schedule & First Meal |
| BR-109 | Minimum setup requirements for "Go Live": brand info saved (name in both languages) + at least 1 town with 1 quarter and delivery fee + at least 1 active meal with at least 1 component |
| BR-110 | Steps can be skipped but the wizard re-appears on dashboard until minimum setup is complete |
| BR-111 | The "Go Live" button is only enabled when all minimum requirements are met |
| BR-112 | Completed steps are marked with a checkmark in the progress bar and are clickable for revisiting |
| BR-113 | The wizard is only shown to users with cook or manager role for the current tenant |
| BR-114 | Step progress (which steps are complete) is persisted so the wizard resumes where the cook left off |
| BR-115 | After "Go Live" is clicked, the tenant's `setup_complete` flag is set to true and the wizard no longer auto-shows |
| BR-116 | The cook can still access the wizard manually from settings after going live, to update their setup |

---

## Data Involved

**Reads:**
- Tenant setup status (`setup_complete` flag)
- Cook profile data (to determine which steps are complete)
- Cover images count
- Delivery areas (towns/quarters) count
- Meals count

**Creates:**
- Nothing (individual steps handle data creation)

**Updates:**
- Tenant `setup_complete` flag when "Go Live" is clicked

---

## Acceptance Criteria

- **Given** a newly created tenant, **when** the cook logs in for the first time, **then** the setup wizard is displayed starting at Step 1
- **Given** the wizard, **when** the cook completes Step 1 and clicks "Save & Continue", **then** they advance to Step 2 and Step 1 is marked complete
- **Given** completed Steps 1 and 2, **when** the cook clicks Step 1 in the progress bar, **then** they navigate back to Step 1 with pre-filled data
- **Given** brand info + 1 delivery area + 1 meal exist, **when** the cook views the wizard, **then** the "Go Live" button is enabled
- **Given** minimum setup is NOT complete, **when** the cook navigates to the dashboard, **then** a setup completion banner is displayed
- **Given** the cook clicks "Go Live", **when** the action completes, **then** the tenant is marked as setup-complete and the cook is redirected to the dashboard
- **Given** setup is complete, **when** the cook logs in, **then** the wizard does not auto-show; the full dashboard loads directly

---

## Verification Steps

1. Create a new tenant and log in as the cook — confirm wizard appears
2. Complete Step 1 and confirm advancement to Step 2 with progress bar update
3. Skip Step 2 and complete Steps 3 and 4 — confirm "Go Live" becomes enabled
4. Click "Go Live" and confirm redirect to dashboard without wizard banner
5. Navigate back to previous steps and confirm data is preserved
6. Log out and back in during partial completion — confirm wizard resumes correctly
7. As a client user on the tenant domain, confirm the wizard is not accessible

---

## Edge Cases & Exceptions

| Condition | Expected Behavior |
|-----------|-------------------|
| Cook refreshes the page mid-wizard | Wizard reloads at the current step with any saved data |
| Cook deletes their only delivery area after reaching Step 4 | "Go Live" button becomes disabled again |
| Manager tries to access wizard | Allowed if they have the appropriate tenant permissions |
| Wizard accessed after "Go Live" (via settings) | All steps show as complete; cook can edit any step |
| Browser back button during wizard | Navigates to previous wizard step, not away from wizard |

---

## UI/UX Notes

- Progress bar at the top: horizontal on desktop, compact on mobile
- Each step shows: step number, title, status (pending/active/complete with checkmark)
- Active step is highlighted; completed steps have checkmarks; future steps are dimmed
- "Save & Continue" is the primary action button; "Skip" is secondary (lighter style)
- "Go Live" button is prominent (full-width, accent color) and shows a confirmation dialog
- Mobile: progress bar becomes a compact stepper with step numbers only
- Wizard content area transitions smoothly between steps via Gale

---

## Related Features

| Code | Feature | Relationship |
|------|---------|-------------|
| F-049 | Admin Tenant Creation | Creates the tenant that triggers this wizard |
| F-072 | Brand Info Step | Step 1 content |
| F-073 | Cover Images Step | Step 2 content |
| F-074 | Delivery Areas Step | Step 3 content |
| F-075 | Schedule & First Meal Step | Step 4 content |
| F-076 | Cook Dashboard Layout | Dashboard that replaces wizard after "Go Live" |
